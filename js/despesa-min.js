function atualizarDados(){document.location.reload(!0)}function onSelectCompetencia(){document.location.href="admin-controle-despesa?comp="+document.getElementById("selCompetencia").value}function inserirDespesa(){let t=$("#descricaoNovaDespesa").val(),i=$("#dataNovaDespesa").val(),n=$("#valorNovaDespesa").val();if(t==""||t==null||t==undefined){displayMessage("Descrição da Despesa é obrigatória","Descrição da despesa","error",3);return}if(i==""||i==null||i==undefined){displayMessage("Data da Despesa é obrigatória","Data da despesa","error",3);return}if(n==""||n==null||n==undefined){displayMessage("Valor da Despesa é obrigatória","Valor da despesa","error",3);return}$("#btn-salvar").prop("disabled",!0);$("#btn-salvar").html("Salvando...");$("#btn-fechar").prop("disabled",!0);let r="01/"+$("#selCompetencia").val();n=n.replace(".","");n=n.replace(",",".");$.ajax({url:"ajax-despesa.php",type:"get",dataType:"json",data:{acao:"i",competencia:r,descricao:t,data:i,valor:n}}).done(function(){document.location.reload(!0)}).fail(function(){document.location.reload(!0)})}function atualizarDespesa(n){let i="01/"+$("#selCompetencia").val(),r=$("#descricao_"+n).val(),u=$("#data_pagto_"+n).val(),t=$("#valor_despesa_"+n).val();t=t.replace(".","");t=t.replace(",",".");$.ajax({url:"ajax-despesa.php",type:"get",dataType:"json",data:{acao:"a",id:n,competencia:i,descricao:r,data:u,valor:t}}).done(function(){}).fail(function(){})}function excluirDespesa(n){document.getElementById("btn_excluir_"+n).value="Excluindo...";document.getElementById("btn_excluir_"+n).disabled=!0;$.ajax({url:"ajax-despesa.php",type:"get",dataType:"json",data:{acao:"e",id:n}}).done(function(){document.location.reload(!0)}).fail(function(){document.location.reload(!0)})}function limparDadosModal(){$("#descricaoNovaDespesa").val("");$("#dataNovaDespesa").val("");$("#valorNovaDespesa").val("")}function carregarModal(){$("#dataNovaDespesa").val((new Date).toISOString().substring(0,10))}function exibirModalDespesaCompetencia(n){let t=getCustomer();t?(document.getElementById("rows-despesas").innerHTML="",$("#mes-competencia").html(n),$("#linkDetalheFinanceiro").prop("href","detalhe-financeiro?comp="+n),$("#descricaoNovaDespesa").val(""),$("#dataNovaDespesa").val(""),$("#valorNovaDespesa").val(""),$.ajax({url:"ajax-despesa.php",type:"get",dataType:"json",data:{acao:"get",competencia:n}}).done(function(n){let i=0,t="<tbody>";$.each(n,function(n,r){i+=parseFloat(r.valorDespesa);t+='<tr> <td class="text-center">'+r.descricao+'<\/td> <td class="text-right">'+parseFloat(r.valorDespesa).toLocaleString("pt-br",{style:"currency",currency:"BRL"})+"<\/td><\/tr>"});t+="<\/tbody>";document.getElementById("rows-despesas").innerHTML=t;document.getElementById("lblTotalDespesa").innerHTML="Total de despesas no mês: "+i.toLocaleString("pt-br",{style:"currency",currency:"BRL"});$("#modal-exibir-despesa").modal("show")}).fail(function(){$("#modal-exibir-despesa").modal("hide");displayMessage("Ocorreu um erro ao recuperar despesas!","Erro ao recuperar despesas","error",3)})):displayMessage("Para visualizar os detalhes das despesas, você deve estar logado.","Logar no sistema","info",3)}